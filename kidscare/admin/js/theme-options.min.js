jQuery(document).ready(function(){themerex_options_init(jQuery(".themerex_options_body"));scrollMenuFix();jQuery(".themerex_options").on("click",".themerex_options_button_save",function(c){if(typeof(tinymce)!="undefined"){var a=tinymce.activeEditor;if(a!=null&&"mce_fullscreen"==a.id){tinymce.get("content").setContent(a.getContent({format:"raw"}),{format:"raw"})}tinymce.triggerSave()}var b={action:"themerex_options_save",nonce:THEMEREX_OPTIONS_ajax_nonce,data:jQuery(".themerex_options_form").serialize(),mode:"save"};jQuery.post(THEMEREX_OPTIONS_ajax_url,b,function(d){themerex_message_success("",THEMEREX_OPTIONS_STRINGS_save_options)});c.preventDefault();return false});jQuery(".themerex_options").on("click",".themerex_options_button_reset",function(a){themerex_message_confirm(THEMEREX_OPTIONS_STRINGS_reset_options_confirm,THEMEREX_OPTIONS_STRINGS_reset_options,function(b){if(b!=1){return}var c={action:"themerex_options_save",nonce:THEMEREX_OPTIONS_ajax_nonce,mode:"reset"};jQuery.post(THEMEREX_OPTIONS_ajax_url,c,function(d){themerex_message_success("",THEMEREX_OPTIONS_STRINGS_reset_options)})});a.preventDefault();return false});jQuery(".themerex_options").on("click",".themerex_options_button_export,.themerex_options_button_import",function(g){var f="import";if(jQuery(this).hasClass("themerex_options_button_export")){f="export";if(typeof(tinymce)!="undefined"){var c=tinymce.activeEditor;if(c!=null&&"mce_fullscreen"==c.id){tinymce.get("content").setContent(c.getContent({format:"raw"}),{format:"raw"})}tinymce.triggerSave()}}var b='<div class="themerex_options_export_set_name"><form>'+(f=="import"?"":'<div class="themerex_options_export_name_area"><label for="themerex_options_export_name">'+THEMEREX_OPTIONS_STRINGS_export_options_label+'</label><input id="themerex_options_export_name" name="themerex_options_export_name" class="themerex_options_export_name" type="text"></div>');if(THEMEREX_OPTIONS_export_list.length>0){b+='<div class="themerex_options_export_name2_area"><label for="themerex_options_export_name2">'+(f=="import"?THEMEREX_OPTIONS_STRINGS_export_options_label:THEMEREX_OPTIONS_STRINGS_export_options_label2)+'</label><select id="themerex_options_export_name2" name="themerex_options_export_name2" class="themerex_options_export_name2"><option value="">'+THEMEREX_OPTIONS_STRINGS_export_options_select+"</option>";for(var a=0;a<THEMEREX_OPTIONS_export_list.length;a++){b+='<option value="'+THEMEREX_OPTIONS_export_list[a]+'">'+THEMEREX_OPTIONS_export_list[a]+"</option>"}b+="</select></div>"}else{if(f=="import"){b+='<div class="themerex_options_export_empty">'+THEMEREX_OPTIONS_STRINGS_export_empty+"</div>"}}if(f=="import"){b+='<div class="themerex_options_export_textarea"><label for="themerex_options_export_data">'+THEMEREX_OPTIONS_STRINGS_import_options_label+'</label><textarea id="themerex_options_export_data" name="themerex_options_export_data" class="themerex_options_export_data"></textarea></div>'}b+="</form></div>";var d=themerex_message_dialog(b,f=="import"?THEMEREX_OPTIONS_STRINGS_import_options_header:THEMEREX_OPTIONS_STRINGS_export_options_header,function(e){},function(h,e){if(h!=1){return}var j=d.find("#themerex_options_export_name2").val();if(f=="import"){var m=d.find("#themerex_options_export_data").val();if(j==""&&m==""){themerex_message_warning(THEMEREX_OPTIONS_STRINGS_import_options_error,THEMEREX_OPTIONS_STRINGS_import_options_header);return}var k={action:"themerex_options_import",nonce:THEMEREX_OPTIONS_ajax_nonce,name2:j,text:m,override:THEMEREX_OPTIONS_override};jQuery.post(THEMEREX_OPTIONS_ajax_url,k,function(n){var o=JSON.parse(n);if(o.error===""){themerex_options_import_values(o.data);themerex_message_success(THEMEREX_OPTIONS_STRINGS_import_options,THEMEREX_OPTIONS_STRINGS_import_options_header)}else{themerex_message_warning(THEMEREX_OPTIONS_STRINGS_import_options_failed,THEMEREX_OPTIONS_STRINGS_import_options_header)}})}else{var l=d.find("#themerex_options_export_name").val();if(l==""&&j==""){themerex_message_warning(THEMEREX_OPTIONS_STRINGS_export_options_error,THEMEREX_OPTIONS_STRINGS_export_options_header);return}var i=null;if(jQuery("form.themerex_options_form").length===1){i=jQuery("form.themerex_options_form")}else{if(jQuery("form#addtag").length===1){i=jQuery("form#addtag")}else{if(jQuery("form#edittag").length===1){i=jQuery("form#edittag")}else{if(jQuery("form#post").length===1){i=jQuery("form#post")}}}}var k={action:"themerex_options_save",nonce:THEMEREX_OPTIONS_ajax_nonce,data:i.serialize(),name:l,name2:j,mode:"export",override:THEMEREX_OPTIONS_override};jQuery.post(THEMEREX_OPTIONS_ajax_url,k,function(n){var p=JSON.parse(n);themerex_message_success(THEMEREX_OPTIONS_STRINGS_export_options+"<br>"+THEMEREX_OPTIONS_STRINGS_export_link.replace("%s",'<br><a target="_blank" href="'+p.link+'">'+THEMEREX_OPTIONS_STRINGS_export_download+"</a>"),THEMEREX_OPTIONS_STRINGS_export_options_header);if(l!=""){if(j!=""){for(var o=0;o<THEMEREX_OPTIONS_export_list.length;o++){if(THEMEREX_OPTIONS_export_list[o]==j){THEMEREX_OPTIONS_export_list[o]=l;break}}}else{THEMEREX_OPTIONS_export_list.push(l)}}})}});g.preventDefault();return false})});var THEMEREX_OPTIONS_BODY=null;function themerex_options_init(b){THEMEREX_OPTIONS_BODY=b;prettyPhotoInit(b);b.find("[data-param]").change(function(){themerex_options_check_dependency(jQuery(this).parents(".themerex_options_tab_content"))});b.find(".themerex_options_tab,.themerex_options_partition").tabs({create:function(f,d){if(d.panel){themerex_options_init_hidden_elements(d.panel)}},activate:function(f,d){if(d.newPanel){themerex_options_init_hidden_elements(d.newPanel)}}});b.find(".themerex_options_tab > ul,.themerex_options_partition > ul").sortable().disableSelection();b.find(".themerex_options_accordion").accordion({header:".themerex_options_accordion_header",collapsible:true,heightStyle:"content",create:function(f,d){if(d.panel){themerex_options_init_hidden_elements(d.panel)}},activate:function(f,d){if(d.newPanel){themerex_options_init_hidden_elements(d.newPanel)}}});b.find(".themerex_options_accordion").sortable().disableSelection();b.on("click",".themerex_options_toggle .themerex_options_toggle_header",function(){if(jQuery(this).hasClass("ui-state-active")){jQuery(this).removeClass("ui-state-active");jQuery(this).siblings("div").slideUp()}else{jQuery(this).addClass("ui-state-active");jQuery(this).siblings("div").slideDown();themerex_options_init_hidden_elements(jQuery(this))}});b.find(".themerex_options_input_masked").each(function(){jQuery(this).mask(""+jQuery(this).data("mask"))});b.find(".themerex_options_input_date").each(function(){var e=jQuery(this).data("linked-field");var d=e?jQuery("#"+e).val():jQuery(this).val();jQuery(this).datepicker({dateFormat:jQuery(this).data("format"),numberOfMonths:jQuery(this).data("months"),gotoCurrent:true,changeMonth:true,changeYear:true,defaultDate:d,onSelect:function(g,f){var h=jQuery(this).data("linked-field");if(!empty(h)){jQuery("#"+h).val(g).trigger("change")}else{f.input.trigger("change")}}})});b.on("click",".themerex_options_field_spinner .themerex_options_arrow_up,.themerex_options_field_spinner .themerex_options_arrow_down",function(){var h=jQuery(this).parent().siblings("input");var g=(jQuery(this).hasClass("themerex_options_arrow_up")?1:-1)*Math.max(1,isNaN(h.data("increment"))?1:h.data("increment"));var d=h.data("min");var f=h.data("max");var e=isNaN(h.val())?0:Number(h.val())+g;if(!isNaN(f)&&e>f){e=f}if(!isNaN(d)&&e<d){e=d}h.val(e).trigger("change")});b.find(".themerex_options_field_tags .themerex_options_field_content").sortable({items:"span",update:function(e,f){var d="";f.item.parent().find(".themerex_options_tag").each(function(){d+=(d?THEMEREX_OPTIONS_delimiter:"")+jQuery(this).text()});f.item.siblings('input[type="hidden"]').eq(0).val(d).trigger("change")}}).disableSelection();b.on("keypress",'.themerex_options_field_tags input[type="text"]',function(d){if(d.which===44){a(jQuery(this));d.preventDefault();return false}});b.on("keydown",'.themerex_options_field_tags input[type="text"]',function(d){if(d.which===13){a(jQuery(this));d.preventDefault();return false}});function a(e){if(e.val().trim()!=""){var f=e.val().trim();e.before('<span class="themerex_options_tag iconadmin-cancel">'+f+"</span>");var d=e.next().val();e.next().val(d+(d?THEMEREX_OPTIONS_delimiter:"")+f).trigger("change");e.val("")}}b.on("click",".themerex_options_field_tags .themerex_options_field_content span",function(f){var g=jQuery(this).text();var d=jQuery(this).siblings('input[type="hidden"]').eq(0).val()+THEMEREX_OPTIONS_delimiter;d=d.replace(g+THEMEREX_OPTIONS_delimiter,"");d=d.substring(0,d.length-1);jQuery(this).siblings('input[type="hidden"]').eq(0).val(d).trigger("change");jQuery(this).siblings('input[type="text"]').focus();jQuery(this).remove();f.preventDefault();return false});b.on("click",".themerex_options_field_tags .themerex_options_field_content",function(d){jQuery(this).find('input[type="text"]').focus();d.preventDefault();return false});b.on("change",".themerex_options_field_checkbox input",function(d){jQuery(this).next("label").eq(0).toggleClass("themerex_options_state_checked");if(jQuery(this).next("label").eq(0).hasClass("themerex_options_state_checked")){jQuery(this).attr("checked","checked")}else{jQuery(this).removeAttr("checked")}d.preventDefault();return false});b.on("change",'.themerex_options_field_radio input[type="radio"]',function(d){jQuery(this).parent().parent().find("label").removeClass("themerex_options_state_checked").find("span").removeClass("iconadmin-dot-circled");jQuery(this).parent().parent().find("input:checked").next("label").eq(0).addClass("themerex_options_state_checked").find("span").addClass("iconadmin-dot-circled");jQuery(this).parent().parent().find('input[type="hidden"]').val(jQuery(this).parent().parent().find("input:checked").val()).trigger("change");d.preventDefault();return false});b.on("click",".themerex_options_field_switch .themerex_options_switch_inner",function(f){var g=parseInt(jQuery(this).css("marginLeft"))==0?2:1;var d=jQuery(this).find("span").eq(g-1).data("value");jQuery(this).parent().siblings('input[type="hidden"]').eq(0).val(d).trigger("change");jQuery(this).parent().toggleClass("themerex_options_state_off",g==2);f.preventDefault();return false});b.on("click",".themerex_options_field_checklist .themerex_options_listitem",function(f){var d=jQuery(this).parents(".themerex_options_field_checklist").hasClass("themerex_options_multiple");if(!d){jQuery(this).siblings(".themerex_options_listitem").removeClass("themerex_options_state_checked")}jQuery(this).toggleClass("themerex_options_state_checked");c(jQuery(this).parent());f.preventDefault();return false});b.find(".themerex_options_field_checklist.themerex_options_multiple .themerex_options_field_content").sortable({update:function(d,e){c(e.item.parent())}}).disableSelection();b.on("click",".themerex_options_field_select .themerex_options_input,.themerex_options_field_select .themerex_options_field_after,.themerex_options_field_images .themerex_options_caption_image,.themerex_options_field_icons .themerex_options_caption_icon",function(d){jQuery(this).siblings(".themerex_options_input_menu").slideToggle();d.preventDefault();return false});b.on("click",".themerex_options_field .themerex_options_menuitem",function(f){var d=jQuery(this).parents(".themerex_options_field").hasClass("themerex_options_multiple");if(!d){jQuery(this).siblings(".themerex_options_menuitem").removeClass("themerex_options_state_checked");jQuery(this).addClass("themerex_options_state_checked")}else{jQuery(this).toggleClass("themerex_options_state_checked")}c(jQuery(this).parent());if(!d&&!jQuery(this).parent().hasClass("themerex_options_input_menu_list")){jQuery(this).parent().slideToggle()}f.preventDefault();return false});b.find(".themerex_options_field.themerex_options_multiple .themerex_options_input_menu").sortable({update:function(d,e){c(e.item.parent())}}).disableSelection();function c(h){var k="",e="",j="",g="";h.find(".themerex_options_menuitem,.themerex_options_listitem").each(function(){if(jQuery(this).hasClass("themerex_options_state_checked")){k+=(k?THEMEREX_OPTIONS_delimiter:"")+jQuery(this).data("value");var l=jQuery(this).find(".themerex_options_input_image");if(l.length>0){j=l.eq(0).data("src")}else{if(jQuery(this).parents(".themerex_options_field_icons").length>0){g=jQuery(this).data("value")}else{e+=(e?THEMEREX_OPTIONS_delimiter:"")+jQuery(this).html()}}}});h.parent().find('input[type="hidden"]').eq(0).val(k).trigger("change");if(e!=""){h.parent().find('input[type="text"]').eq(0).val(e)}if(j!=""){h.parent().find(".themerex_options_caption_image span").eq(0).css("backgroundImage","url("+j+")")}if(g!=""){var i=h.parent().find(".themerex_options_input_socials");if(i.length>0){var f=i.next();var d=f.attr("class");d=(d.indexOf(" icon")>0?d.substr(0,d.indexOf(" icon")):d)+" "+g;f.removeClass().addClass(d).trigger("change")}else{h.parent().find(".themerex_options_caption_icon span").eq(0).removeClass().addClass(g).trigger("change")}}}b.find(".themerex_options_input_color").each(function(){if(jQuery(this).next().hasClass("iColorPicker")){return}jQuery(this).wpColorPicker({change:function(f,d){jQuery(f.target).val(d.color).trigger("change")},clear:function(d){jQuery(d.target).prev().trigger("change")}})});if(b.find(".themerex_options_input_color + .iColorPicker").length>0){iColorPicker();b.find(".themerex_options_input_color + .iColorPicker").each(function(){jQuery(this).click(function(f){iColorShow(null,jQuery(this),function(h,g){h.css("backgroundColor",g);h.siblings("input").attr("value",g).trigger("change")})});var d=jQuery(this).prev();var e=d.val();if(e!=""){jQuery(this).css("backgroundColor",e)}d.change(function(){jQuery(this).next().css("backgroundColor",jQuery(this).val())})})}b.on("click",".themerex_options_clone_button_add",function(i){var h=jQuery(this).parents(".themerex_options_cloneable_area").eq(0);var g=null;var f=0;h.find(".themerex_options_cloneable_item").each(function(){var j=jQuery(this);if(g==null){g=j}var e=Number(j.find('input[name*="_numbers[]"]').eq(0).val());if(e>f){f=e}});var d=g.clone();d.find('input[type="text"],textarea').val("");d.find('input[name*="_numbers[]"]').val(f+1);jQuery(this).before(d);i.preventDefault();return false});b.on("click",".themerex_options_clone_button_del",function(d){if(jQuery(this).parents(".themerex_options_cloneable_item").parent().find(".themerex_options_cloneable_item").length>1){jQuery(this).parents(".themerex_options_cloneable_item").eq(0).remove()}else{themerex_message_warning(THEMEREX_OPTIONS_STRINGS_del_item_error,THEMEREX_OPTIONS_STRINGS_del_item)}d.preventDefault();return false});b.on("click",".themerex_options_button_inherit",function(f){var d=!jQuery(this).hasClass("themerex_options_inherit_off");if(d){jQuery(this).addClass("themerex_options_inherit_off");jQuery(this).parents(".themerex_options_field").find(".themerex_options_content_inherit").fadeOut().find("input").val("")}else{jQuery(this).removeClass("themerex_options_inherit_off");jQuery(this).parents(".themerex_options_field").find(".themerex_options_content_inherit").fadeIn().find("input").val("inherit")}f.preventDefault();return false});b.on("click",".themerex_options_content_inherit",function(d){jQuery(this).parents(".themerex_options_field").find(".themerex_options_button_inherit").addClass("themerex_options_inherit_off");jQuery(this).fadeOut().find("input").val("");d.preventDefault();return false})}var themerex_options_media_frame=[];function themerex_options_action_media_upload(d){var b=jQuery(d);var c=b.data("linked-field")?jQuery("#"+b.data("linked-field")).eq(0):b.siblings("input");var a=c.attr("id");if(themerex_options_media_frame[a]){themerex_options_media_frame[a]["field"]=c;themerex_options_media_frame[a]["frame"].open();return}themerex_options_media_frame[a]=[];themerex_options_media_frame[a]["field"]=c;themerex_options_media_frame[a]["multi"]=b.data("multiple")?true:false;themerex_options_media_frame[a]["frame"]=wp.media({multiple:themerex_options_media_frame[a]["multi"]?"add":false,title:b.data("caption-choose"),library:{type:b.data("type")?b.data("type"):"image"},button:{text:b.data("caption-update"),close:true}});themerex_options_media_frame[a]["frame"].on("select",function(h){var k="",l=-1,j=false;if(themerex_options_media_frame[a]["multi"]){themerex_options_media_frame[a]["frame"].state().get("selection").map(function(e){k+=(k?"\n":"")+e.toJSON().url});var i=themerex_options_media_frame[a]["field"].val();k=i+(i?"\n":"")+k}else{k=themerex_options_media_frame[a]["frame"].state().get("selection").first().toJSON().url;if(!b.data("linked-field")){var f="";if((l=k.lastIndexOf("."))>=0){var g=k.substr(l+1);f='<a class="themerex_options_image_preview" rel="prettyPhoto" target="_blank" href="'+k+'">';if("jpg,png,gif".indexOf(g)>=0){f+='<img src="'+k+'" alt="" rel="prettyPhoto" />';j=true}else{f+="<span>"+k.substr(k.lastIndexOf("/")+1)+"</span>"}f+="</a>"}b.siblings(".themerex_options_image_preview").remove();if(f!=""){b.parent().append(f);if(j){prettyPhotoInit(THEMEREX_OPTIONS_BODY)}}}}themerex_options_media_frame[a]["field"].val(k).trigger("change")});themerex_options_media_frame[a]["frame"].open()}function themerex_options_action_media_reset(c){var a=jQuery(c);var b=a.data("linked-field")?jQuery("#"+a.data("linked-field")).eq(0):a.siblings("input");a.siblings(".themerex_options_image_preview").remove();b.val("").trigger("change")}function themerex_options_action_select_icon(c){var a=jQuery(c);var b=a.data("linked-field")?jQuery("#"+a.data("linked-field")).eq(0):a.siblings('input[type="hidden"]').eq(0);a.siblings(".themerex_options_input_menu").slideToggle()}function themerex_options_action_show_menu(a){}function themerex_options_action_clear_cache(b){var a={action:"themerex_options_clear_cache",nonce:THEMEREX_OPTIONS_ajax_nonce};jQuery.post(THEMEREX_OPTIONS_ajax_url,a,function(c){themerex_message_success(THEMEREX_OPTIONS_STRINGS_clear_cache,THEMEREX_OPTIONS_STRINGS_clear_cache_header)})}function prettyPhotoInit(a){a.find("a[rel*='prettyPhoto']:not(.inited)").each(function(){jQuery(this).addClass("inited").prettyPhoto({social_tools:"",theme:"facebook",deeplinking:false})})}function themerex_options_init_hidden_elements(a){themerex_options_check_dependency(a);a.find(".themerex_options_field_range").each(function(){var j=jQuery(this);var g=j.find(".themerex_options_range_scale");var b=g.width();if(b<=0){return}var f=parseFloat(j.find(".themerex_options_input_range").data("step"));var d=Math.pow(10,f.toString().indexOf(".")<0?0:f.toString().length-f.toString().indexOf(".")-1);var m=j.find('.themerex_options_input_range input[type="hidden"]').eq(0);var e=m.val().split(THEMEREX_OPTIONS_delimiter);var c=parseFloat(j.find(".themerex_options_range_min").html());var k=parseFloat(j.find(".themerex_options_range_max").html());var l=b/((k-c)/f);var h=0;j.find(".themerex_options_range_slider").each(function(){var i=e.length==1||h==1?"width":"left";jQuery(this).css("left",(e[h]-c)*l/f+"px");g.find("span").css(i,((e[h]-c)*l/f-(h==1?(e[0]-c)*l/f:0))+"px");h++});if(!j.hasClass("inited")){cl(b+" "+l);j.addClass("inited").find(".themerex_options_range_slider").draggable({axis:"x",grid:[l,l],containment:".themerex_options_input_range",scroll:false,drag:function(r,p){var q=j.find('.themerex_options_input_range input[type="hidden"]').eq(0);var s=q.val().split(THEMEREX_OPTIONS_delimiter);var o=p.helper;var i=o.index()-1;var n=Math.min(k,Math.max(c,Math.round(p.position.left/l*f*d)/d+c));if(s.length==2){if(i==0&&n>s[1]){n=s[1];p.position.left=(n-c)*l/f}if(i==1&&n<s[0]){n=s[0];p.position.left=(n-c)*l/f}}o.find(".themerex_options_range_slider_value").html(n);s[i]=n;q.val(s.join(THEMEREX_OPTIONS_delimiter)).trigger("change");if(s.length==2){g.find("span").css("left",(s[0]-c)*l/f+"px")}g.find("span").css("width",((s[s.length==2?1:0]-c)*l/f-(s.length==2?(s[0]-c)*l/f:0))+"px")}})}})}function themerex_options_check_dependency(a){if(typeof THEMEREX_shortcodes=="undefined"){return}var c=THEMEREX_shortcodes[THEMEREX_shortcodes_current_idx];var b=a.parents(".themerex_options_tab");a.find("[data-param]").each(function(){var n=jQuery(this);var g=n.data("param");var o=n.attr("type")!="checkbox"||n.get(0).checked?n.val():"";var d=false;var l="",k="";for(l in c.params){if(c.params[l].id==g){if(typeof c.params[l].dependency!="undefined"){d=c.params[l].dependency}break}}if(d===false&&typeof c.children!="undefined"){for(l in c.children.params){if(c.children.params[l].id==g){if(typeof c.children.params[l].dependency!="undefined"){d=c.children.params[l].dependency}break}}}if(d){var p=0,m=0;var h=typeof d.compare!="undefined"?d.compare.toLowerCase():"and";var f=null,e="";for(l in d){if(l=="compare"){continue}m++;f=b.find('[data-param="'+l+'"]');if(f.length>0){e=f.attr("type")!="checkbox"||f.get(0).checked?f.val():"";for(k in d[l]){if((d[l][k]=="not_empty"&&e!="")||(d[l][k]=="is_empty"&&e=="")||(e!=""&&e.indexOf(d[l][k])==0)){p++;break}}}if(p>0&&h=="or"){break}}if((p>0&&h=="or")||(p==m&&h=="and")){n.parents(".themerex_options_field").show().removeClass("themerex_options_no_use")}else{n.parents(".themerex_options_field").hide().addClass("themerex_options_no_use")}}})}jQuery(window).scroll(function(){scrollMenuFix()});function scrollMenuFix(){var b=jQuery(".themerex_options_form .themerex_options_header");if(b.length>0){if(b.data("wrap")!=1){b.wrap('<div class="themerex_options_header_wrap" style="height:'+b.height()+'px;"></div>');b.attr("data-wrap","1")}var c=jQuery(window).scrollTop();var d=jQuery("#wpadminbar").height();var a=jQuery(".themerex_options_header").height();if(c>(d+20+a)){jQuery(".themerex_options_header").addClass("themerex_options_header_fixed")}else{jQuery(".themerex_options_header").removeClass("themerex_options_header_fixed")}}}function themerex_options_import_values(c){var d="",b="";for(var a in c){if((b=themerex_options_set_value(a,c[a]))!=""){d+=(d!=""?",<br>":"")+b}}if(d!=""){themerex_message_warning(THEMEREX_OPTIONS_STRINGS_import_options_broken+"<br>"+d,THEMEREX_OPTIONS_STRINGS_import_options_header)}}function themerex_options_set_value(b,H){var o="";var d=(typeof H=="object"?"[]":"");var a=jQuery('[name="'+b+d+'"]');if(a.length==0){return false}var n=a.parents(".themerex_options_field");var e=themerex_options_get_type(n);var t=a.parents(".themerex_options_cloneable_area");var v=null;if(t.length>0){t.find(".themerex_options_cloneable_item").each(function(i){if(i==0){v=jQuery(this);a.eq(0).val("");jQuery(this).find('[name="'+b+'_numbers[]"]').val(0);if(e=="socials"){jQuery(this).find('[name="'+b+'_icon[]"]').val("")}}else{jQuery(this).remove()}})}if(typeof H!="object"||typeof H[0]=="undefined"){H=[H]}var A=0;for(var B in H){if(THEMEREX_OPTIONS_override!="general"){if(H[B]!="inherit"){n.find(".themerex_options_button_inherit").addClass("themerex_options_inherit_off");n.find(".themerex_options_content_inherit").fadeOut().find("input").val("")}else{n.find(".themerex_options_button_inherit").removeClass("themerex_options_inherit_off");n.find(".themerex_options_content_inherit").fadeIn().find("input").val("inherit")}}if(A>0&&t.length>0){var m=v.clone();m.find('input[name*="_numbers[]"]').val(B);t.find(".themerex_options_clone_button_add").before(m);a=jQuery('[name="'+b+'[]"]')}if(THEMEREX_OPTIONS_override=="general"||H[B]!="inherit"){if(e=="text"||e=="textarea"||e=="hidden"||e=="spinner"){a.eq(A).val(H[B]).trigger("change")}else{if(e=="editor"){a.eq(A).val(H[B]).trigger("change");if(typeof(tinymce)!="undefined"&&typeof(tinymce.editors[b])!="undefined"){tinymce.editors[b].setContent(H[B])}}else{if(e=="date"){n.datepicker("setDate",H[B]);a.eq(A).val(H[B]).trigger("change")}else{if(e=="tags"){a.eq(A).val(H[B]).trigger("change");a.eq(A).parent().find(".themerex_options_tag").remove();a.eq(A).prev().val("");var q=H[B].split(THEMEREX_OPTIONS_delimiter);for(var z=0;z<q.length;z++){a.eq(A).prev().before('<span class="themerex_options_tag iconadmin-cancel">'+q[z]+"</span>")}}else{if(e=="checkbox"){a.eq(A).next("label").eq(0).toggleClass("themerex_options_state_checked",H[B]=="true");if(H[B]=="true"){a.eq(A).attr("checked","checked")}else{a.eq(A).removeAttr("checked")}}else{if(e=="radio"){a.eq(A).removeAttr("checked").parent().parent().find("label").removeClass("themerex_options_state_checked").find("span").removeClass("iconadmin-dot-circled");a.eq(A).parent().parent().find('input[value="'+H[B]+'"]').attr("checked","checked").next("label").eq(0).addClass("themerex_options_state_checked").find("span").addClass("iconadmin-dot-circled");a.eq(A).parent().parent().find('input[type="hidden"]').val(H[B]).trigger("change")}else{if(e=="switch"){a.eq(A).val(H[B]).trigger("change");var r=a.siblings(".themerex_options_switch").find('[data-value="'+H[B]+'"]').index();a.eq(A).siblings(".themerex_options_switch").toggleClass("themerex_options_state_off",r==1)}else{if(e=="checklist"){a.eq(A).val(H[B]).trigger("change");a.eq(A).siblings(".themerex_options_listitem").removeClass("themerex_options_state_checked");var u=H[B].split(THEMEREX_OPTIONS_delimiter);for(var z=0;z<u.length;z++){a.eq(A).siblings('.themerex_options_listitem[data-value="'+u[z]+'"]').addClass("themerex_options_state_checked")}}else{if(e=="media"){a.eq(A).val(H[B]).trigger("change");a.eq(A).siblings(".themerex_options_image_preview").remove();if(H[B]!=""){var D=H[B].split("/").pop();if(D!=""){var w=D.split(".");var F=w[0];var g=w.length>1?w[1]:"";a.eq(A).after('<a class="themerex_options_image_preview" rel="prettyPhoto" target="_blank" href="'+H[B]+'">'+("jpg,png,gif".indexOf(g)>=0?'<img src="'+H[B]+'" alt="" />':"<span>"+F+"</span>")+"</a>")}}}else{if(e=="range"){a.eq(A).val(H[B]).trigger("change");var G=n.find(".themerex_options_range_scale");var k=parseInt(n.find(".themerex_options_input_range").data("step"));var f=parseInt(n.find(".themerex_options_range_min").html());var h=parseInt(n.find(".themerex_options_range_max").html());var E=G.width();var p=E/(h-f)*k;var u=H[B].split(THEMEREX_OPTIONS_delimiter);for(var z=0;z<u.length;z++){var x=a.eq(A).siblings(".themerex_options_range_slider").eq(z);x.find(".themerex_options_range_slider_value").html(u[z]);var y=u.length==1||z==1?"width":"left";x.css("left",(u[z]-f)*p+"px");G.find("span").css(y,((u[z]-f)*p-(z==1?(u[0]-f)*p:0))+"px")}}else{if(e=="select"||e=="images"||e=="icons"){a.eq(A).val(H[B]).trigger("change");a.eq(A).siblings(".themerex_options_input_menu").find(".themerex_options_menuitem").removeClass("themerex_options_state_checked");var u=H[B].split(THEMEREX_OPTIONS_delimiter);for(var z=0;z<u.length;z++){a.eq(A).siblings(".themerex_options_input_menu").find('.themerex_options_menuitem[data-value="'+u[z]+'"]').addClass("themerex_options_state_checked");if(e=="images"){var l=a.eq(A).siblings(".themerex_options_input_menu").find('.themerex_options_menuitem[data-value="'+u[z]+'"]').find("span").data("src");a.eq(A).siblings(".themerex_options_caption_image").find("span").css("backgroundImage","url("+l+")")}else{if(e=="icons"){var c=a.eq(A).siblings(".themerex_options_caption_icon").find("span").attr("class");c=(c.indexOf(" icon")>0?c.substr(0,c.indexOf(" icon")):c)+" "+u[B];a.eq(A).siblings(".themerex_options_caption_icon").find("span").removeClass().addClass(c)}else{var C=a.eq(A).siblings(".themerex_options_input_menu").find('.themerex_options_menuitem[data-value="'+u[z]+'"]').text();a.eq(A).siblings(".themerex_options_input").val(C)}}}}else{if(e=="socials"){a.eq(A).val(H[B].url).trigger("change");a.eq(A).siblings('[name="social_icons_icon[]"]').val(H[B].icon);a.eq(A).siblings(".themerex_options_input_menu").find(".themerex_options_menuitem").removeClass("themerex_options_state_checked");a.eq(A).siblings(".themerex_options_input_menu").find('.themerex_options_menuitem[data-value="'+H[B].icon+'"]').addClass("themerex_options_state_checked");var s=n.hasClass("themerex_options_field_images")?"images":"icons";if(s=="images"){a.eq(A).siblings(".themerex_options_caption_image").find("span").css("backgroundImage","url("+H[B].icon+")")}else{if(s=="icons"){var c=a.eq(A).siblings(".themerex_options_field_after").attr("class");c=(c.indexOf(" icon")>0?c.substr(0,c.indexOf(" icon")):c)+" "+H[B].icon;a.eq(A).siblings(".themerex_options_field_after").removeClass().addClass(c)}}}else{if(e=="color"){a.eq(A).val(H[B]).trigger("change")}else{a.eq(A).val(H[B]).trigger("change");if(!o){o=b+" ("+e+") = "+H[B]}}}}}}}}}}}}}}}A++}return o}function themerex_options_get_type(c){var b=c.attr("class").split(" ");var d="text";for(var a=0;a<b.length;a++){if(b[a].indexOf("themerex_options_field_")==0){d=b[a].split("_").pop();break}}return d};