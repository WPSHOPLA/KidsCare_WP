var THEMEREX_ADMIN_MODE=true;var media_frame=null;var media_link="";function showMediaManager(a){media_link=jQuery(a);if(media_frame){media_frame.open();return false}media_frame=wp.media({title:media_link.data("choose"),library:{type:"image"},multiple:media_link.data("multiple")===true?"add":false,button:{text:media_link.data("update"),close:true}});media_frame.on("select",function(){var b=jQuery("#"+media_link.data("linked-field")).eq(0);var d="";if(media_link.data("multiple")===true){media_frame.state().get("selection").map(function(e){d+=(d?"\n":"")+e.toJSON().url});var c=b.val();d=c+(c?"\n":"")+d}else{d=media_frame.state().get("selection").first().toJSON().url}b.val(d);b.trigger("change")});media_frame.open();return false};